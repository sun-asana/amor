<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Amor Editor: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #fff0f5; color: #444; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .q-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; background: #fff5f7; padding: 15px; border-radius: 12px; margin-bottom: 10px; align-items: center; }
        input { width: 90%; padding: 8px; border: 1px solid #ffb3c1; border-radius: 8px; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–æ–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-zone { 
            border: 2px dashed #ff4d6d; border-radius: 10px; padding: 10px; text-align: center; 
            cursor: pointer; font-size: 12px; transition: 0.3s; background: white;
        }
        .upload-zone:hover { background: #ffeef2; }
        .preview-img { max-height: 50px; display: none; margin: 5px auto; border-radius: 5px; }
        
        button { background: #ff4d6d; color: white; border: none; padding: 15px 30px; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; font-size: 18px; }
        #result { margin-top: 20px; display: none; }
        textarea { width: 100%; height: 100px; border-radius: 10px; border: 1px solid #ddd; padding: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>üíñ Amor Editor: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π</h2>
    <div id="inputs-container"></div>
    
    <button onclick="generate()">–°–û–ó–î–ê–¢–¨ –ò–ì–†–£ –ò –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î</button>

    <div id="result">
        <h3>–ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially:</h3>
        <textarea id="code-box" readonly></textarea>
    </div>
</div>

<script>
    const container = document.getElementById('inputs-container');
    const imagesData = {}; // –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–æ–≤ –∫–∞—Ä—Ç–∏–Ω–æ–∫

    // –°–æ–∑–¥–∞–µ–º 9 —Å—Ç—Ä–æ–∫ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
    for (let i = 1; i <= 9; i++) {
        container.innerHTML += `
            <div class="q-row">
                <input type="text" id="q${i}" placeholder="–í–æ–ø—Ä–æ—Å ${i}">
                <input type="text" id="a${i}" placeholder="–û—Ç–≤–µ—Ç ${i}">
                <div class="upload-zone" onclick="document.getElementById('file${i}').click()" 
                     id="zone${i}" ondrop="dropHandler(event, ${i})" ondragover="return false">
                    <span id="text${i}">üñºÔ∏è –§–æ—Ç–æ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏</span>
                    <img id="prev${i}" class="preview-img">
                    <input type="file" id="file${i}" hidden onchange="fileHandler(this, ${i})">
                </div>
            </div>
        `;
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
    function processFile(file, index) {
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            imagesData[index] = e.target.result; // –°–æ—Ö—Ä–∞–Ω—è–µ–º Base64 –∫–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–∏
            document.getElementById('prev'+index).src = e.target.result;
            document.getElementById('prev'+index).style.display = 'block';
            document.getElementById('text'+index).style.display = 'none';
            document.getElementById('zone'+index).style.borderColor = '#4CAF50';
        };
        reader.readAsDataURL(file);
    }

    function fileHandler(input, index) { processFile(input.files[0], index); }
    function dropHandler(ev, index) {
        ev.preventDefault();
        if (ev.dataTransfer.items) {
            processFile(ev.dataTransfer.items[0].getAsFile(), index);
        }
    }

    function generate() {
        const baseUrl = "https://sun-asana.github.io/amor/index.html"; // –¢–í–û–Ø –°–°–´–õ–ö–ê –ù–ê GITHUB
        let params = new URLSearchParams();
        
        // –¢—É—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —Ñ–æ–Ω–∞ –∏ –∫—É—Ä—Å–æ—Ä–∞ –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –∫–æ–¥–∞
        params.set('grid', 'hearts');
        params.set('bg', 'romance');

        for (let i = 1; i <= 9; i++) {
            const q = document.getElementById('q'+i).value || "";
            const a = document.getElementById('a'+i).value || "";
            const img = imagesData[i] || "";
            params.set('q'+i, `${q}|${a}|${img}`);
        }

        const finalUrl = baseUrl + "?" + params.toString();
        const iframe = `<iframe src="${finalUrl}" width="800" height="600" frameborder="0" allowfullscreen></iframe>`;
        
        document.getElementById('code-box').value = iframe;
        document.getElementById('result').style.display = 'block';
        
        // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä
        navigator.clipboard.writeText(iframe);
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially —á–µ—Ä–µ–∑ Insert -> Others");
    }
</script>

</body>
</html>

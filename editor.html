<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Amor Editor: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</title>
    <style>
        :root { --primary: #ff4d6d; --bg: #fff0f5; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #444; padding: 20px; display: flex; justify-content: center; }
        .container { max-width: 900px; width: 100%; background: white; padding: 30px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        
        h2 { text-align: center; color: var(--primary); margin-bottom: 30px; }
        
        .section { background: #fffafb; padding: 20px; border-radius: 20px; margin-bottom: 20px; border: 1px solid #ffecf0; }
        .section-title { font-weight: bold; margin-bottom: 15px; display: block; color: var(--primary); }

        .flex-row { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px; }
        .opt-group { flex: 1; min-width: 200px; }
        select, input[type="text"] { width: 100%; padding: 10px; border: 2px solid #ffdae0; border-radius: 12px; outline: none; }
        
        .q-row { display: grid; grid-template-columns: 1fr 1fr 1.2fr; gap: 10px; margin-bottom: 10px; align-items: center; }
        
        .upload-zone { 
            border: 2px dashed #ffb3c1; border-radius: 12px; padding: 8px; text-align: center; 
            cursor: pointer; font-size: 13px; background: white; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; min-height: 40px;
        }
        .upload-zone:hover { border-color: var(--primary); background: #fff5f7; }
        .preview-img { max-height: 35px; border-radius: 5px; margin-right: 10px; display: none; }

        button { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; font-size: 18px; transition: 0.3s; margin-top: 10px; }
        button:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(255, 77, 109, 0.3); }

        /* --- –°–¢–ò–õ–ò –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê –ò –†–ï–ó–£–õ–¨–¢–ê–¢–ê --- */
        #result { margin-top: 25px; display: none; animation: fadeIn 0.5s; }
        textarea { width: 100%; height: 80px; border-radius: 15px; border: 2px solid #eee; padding: 15px; box-sizing: border-box; resize: none; font-family: monospace; margin-bottom: 20px; }
        
        #preview-container { 
            width: 100%; height: 500px; border: 5px solid #ffdae0; border-radius: 20px; 
            overflow: hidden; background: #eee; margin-top: 15px; 
        }
        iframe { width: 100%; height: 100%; border: none; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h2>üíñ Amor Editor: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–≥—Ä—ã</h2>

    <div class="section">
        <span class="section-title">1. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ –∫–æ–º–∞–Ω–¥—ã</span>
        <div class="flex-row">
            <div class="opt-group">
                <label>–°—Ç–∏–ª—å —Å–µ—Ç–∫–∏:</label>
                <select id="grid-select">
                    <option value="hearts">–õ–∏–Ω–∏–∏ –∏–∑ —Å–µ—Ä–¥–µ—á–µ–∫ ‚ù§Ô∏è</option>
                    <option value="dots">–ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ ‚ãØ</option>
                    <option value="neon">–ù–µ–æ–Ω–æ–≤—ã–µ –ª–∏–Ω–∏–∏ üí°</option>
                </select>
            </div>
            <div class="opt-group">
                <label>–§–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã:</label>
                <select id="bg-select">
                    <option value="romance">–†–æ–∑–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç</option>
                    <option value="science">–°–≤–µ—Ç–ª—ã–π —Ä–∞–¥–∏–∞–ª—å–Ω—ã–π</option>
                    <option value="modern">–Ø—Ä–∫–∏–π —Ä–æ–∑–æ–≤—ã–π</option>
                </select>
            </div>
            <div class="opt-group">
                <label>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É—Ä—Å–æ—Ä:</label>
                <select id="cursor-select">
                    <option value="https://cdn-icons-png.flaticon.com/512/833/833472.png">–°–µ—Ä–¥–µ—á–∫–æ</option>
                    <option value="https://cdn-icons-png.flaticon.com/512/2904/2904973.png">–°—Ç—Ä–µ–ª–∞ –ö—É–ø–∏–¥–æ–Ω–∞</option>
                    <option value="https://cdn-icons-png.flaticon.com/512/3588/3588640.png">–ê–Ω–≥–µ–ª–æ—á–µ–∫</option>
                </select>
            </div>
        </div>
        <div class="flex-row">
            <input type="text" id="t1" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ö–æ–º–∞–Ω–¥—ã 1 (‚ù§Ô∏è)" style="flex: 1;">
            <input type="text" id="t2" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ö–æ–º–∞–Ω–¥—ã 2 (‚úâÔ∏è)" style="flex: 1;">
        </div>
    </div>

    <div class="section">
        <span class="section-title">2. –í–æ–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –≤ –ø–æ–ª–µ)</span>
        <div id="questions-grid"></div>
    </div>
    
    <button onclick="generate()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ò –ü–†–ï–î–ü–†–û–°–ú–û–¢–†</button>

    <div id="result">
        <div class="section">
            <span class="section-title">üëÄ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä—ã:</span>
            <div id="preview-container">
                <iframe id="preview-frame" src=""></iframe>
            </div>
        </div>

        <div class="section">
            <span class="section-title">üìé –ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially:</span>
            <textarea id="code-box" readonly></textarea>
            <p style="font-size: 12px; color: #888; text-align: center;">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ Genially (Insert -> Others)</p>
        </div>
    </div>
</div>

<script>
    const gridContainer = document.getElementById('questions-grid');
    const imagesData = {};

    for (let i = 1; i <= 9; i++) {
        gridContainer.innerHTML += `
            <div class="q-row">
                <input type="text" id="q${i}" placeholder="–í–æ–ø—Ä–æ—Å ${i}">
                <input type="text" id="a${i}" placeholder="–û—Ç–≤–µ—Ç">
                <div class="upload-zone" onclick="document.getElementById('file${i}').click()" 
                     id="zone${i}" ondrop="dropHandler(event, ${i})" ondragover="return false">
                    <img id="prev${i}" class="preview-img">
                    <span id="text${i}">üñºÔ∏è –§–æ—Ç–æ (URL –∏–ª–∏ —Ñ–∞–π–ª)</span>
                    <input type="file" id="file${i}" hidden onchange="fileHandler(this, ${i})" accept="image/*">
                </div>
            </div>
        `;
    }

    function processFile(file, index) {
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            imagesData[index] = e.target.result;
            const prev = document.getElementById('prev'+index);
            prev.src = e.target.result;
            prev.style.display = 'block';
            document.getElementById('text'+index).innerText = "–ó–∞–º–µ–Ω–µ–Ω–æ ‚úÖ";
            document.getElementById('zone'+index).style.borderColor = "#4CAF50";
        };
        reader.readAsDataURL(file);
    }

    function fileHandler(input, index) { processFile(input.files[0], index); }
    function dropHandler(ev, index) {
        ev.preventDefault();
        if (ev.dataTransfer.files) processFile(ev.dataTransfer.files[0], index);
    }

    function generate() {
        const baseUrl = "https://sun-asana.github.io/amor/index.html"; 
        let params = new URLSearchParams();
        
        params.set('grid', document.getElementById('grid-select').value);
        params.set('bg', document.getElementById('bg-select').value);
        params.set('cur', document.getElementById('cursor-select').value);
        params.set('t1', document.getElementById('t1').value || "–ö–æ–º–∞–Ω–¥–∞ 1");
        params.set('t2', document.getElementById('t2').value || "–ö–æ–º–∞–Ω–¥–∞ 2");

        for (let i = 1; i <= 9; i++) {
            const q = document.getElementById('q'+i).value || "";
            const a = document.getElementById('a'+i).value || "";
            const img = imagesData[i] || "";
            params.set('q'+i, `${q}|${a}|${img}`);
        }

        const finalUrl = baseUrl + "?" + params.toString();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—Ä–µ–π–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        document.getElementById('preview-frame').src = finalUrl;
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥–ª—è Genially
        const iframe = `<iframe src="${finalUrl}" width="800" height="600" frameborder="0" allowfullscreen></iframe>`;
        document.getElementById('code-box').value = iframe;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        document.getElementById('result').style.display = 'block';
        
        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä—É
        window.scrollTo({ top: document.getElementById('result').offsetTop, behavior: 'smooth' });
    }
</script>

</body>
</html>

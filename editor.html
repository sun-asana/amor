<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Amor Engine: Professional Editor</title>
    <style>
        :root { --primary: #ff4d6d; --bg: #fff0f5; --accent: #ffb3c1; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--bg); margin: 0; padding: 20px; color: #444; 
        }

        .main-layout { 
            display: flex; gap: 30px; max-width: 1500px; margin: 0 auto; 
            align-items: flex-start; 
        }

        .editor-side { 
            flex: 1.3; background: white; padding: 30px; 
            border-radius: 35px; box-shadow: 0 15px 40px rgba(255, 77, 109, 0.1); 
        }

        h2 { color: var(--primary); text-align: center; margin-top: 0; font-size: 28px; }

        .section { 
            background: #fffafb; padding: 20px; border-radius: 20px; 
            margin-bottom: 20px; border: 1px solid #ffecf0; 
        }

        .section-title { 
            font-weight: bold; color: var(--primary); margin-bottom: 15px; 
            display: block; font-size: 14px; text-transform: uppercase; letter-spacing: 1px;
        }

        .flex-row { display: flex; gap: 12px; margin-bottom: 12px; align-items: center; }
        
        select, input[type="text"] { 
            flex: 1; padding: 12px; border: 2px solid #ffdae0; 
            border-radius: 15px; outline: none; transition: 0.3s;
        }

        select:focus, input:focus { border-color: var(--primary); }

        .color-group { display: flex; align-items: center; gap: 10px; background: white; padding: 5px 15px; border-radius: 15px; border: 2px solid #ffdae0; }
        input[type="color"] { border: none; width: 35px; height: 35px; cursor: pointer; background: none; }

        .q-row { 
            display: grid; grid-template-columns: 1fr 1fr 1.2fr; 
            gap: 10px; margin-bottom: 10px; 
        }

        .upload-zone { 
            border: 2px dashed var(--accent); border-radius: 15px; 
            padding: 8px; text-align: center; cursor: pointer; 
            font-size: 12px; transition: 0.3s; background: white;
            display: flex; align-items: center; justify-content: center; overflow: hidden;
        }
        .upload-zone:hover { border-color: var(--primary); background: #fff5f7; }

        .preview-img-mini { max-height: 35px; border-radius: 8px; margin-right: 8px; display: none; }

        button { 
            background: var(--primary); color: white; border: none; 
            padding: 18px; border-radius: 50px; cursor: pointer; 
            font-weight: bold; width: 100%; font-size: 18px; 
            transition: 0.4s; box-shadow: 0 10px 20px rgba(255, 77, 109, 0.2);
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 15px 25px rgba(255, 77, 109, 0.4); }

        .preview-side { flex: 1; position: sticky; top: 20px; text-align: center; }
        
        #preview-container { 
            width: 100%; 
            height: 500px; 
            border: 12px solid white; 
            border-radius: 30px; 
            overflow: hidden; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.15); 
            background: #eee;
        }
        iframe { width: 100%; height: 100%; border: none; }

        textarea { 
            width: 100%; height: 100px; margin-top: 15px; border-radius: 15px; 
            border: 1px solid #ddd; padding: 15px; font-size: 12px; color: #666; resize: none;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–π –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è */
        .copy-btn {
            width: auto; padding: 8px 15px; font-size: 12px; margin: 0;
            background: var(--primary); border-radius: 10px;
        }
    </style>
</head>
<body>

<div class="main-layout">
    <div class="editor-side">
        <h2>üëº Amor Engine</h2>
        
        <div class="section">
            <span class="section-title">1. –í–∏–∑—É–∞–ª –∏ –ú–∞–≥–∏—è</span>
            <div class="flex-row">
                <select id="grid-select">
                    <option value="hearts">–°–µ—Ç–∫–∞: –°–µ—Ä–¥–µ—á–∫–∏ (SVG) ‚ù§Ô∏è</option>
                    <option value="dots">–°–µ—Ç–∫–∞: –¢–æ—á–∫–∏ (SVG) ‚ãØ</option>
                    <option value="neon">–°–µ—Ç–∫–∞: –ù–µ–æ–Ω (SVG) üí°</option>
                </select>
                <div class="color-group">
                    <span style="font-size: 12px; color: #888;">–¶–≤–µ—Ç:</span>
                    <input type="color" id="grid-color" value="#ff4d6d">
                </div>
            </div>
            <div class="flex-row">
                <select id="cur-select">
                    <option value="amor">–ö—É—Ä—Å–æ—Ä: –ê–º—É—Ä—á–∏–∫ üëº</option>
                    <option value="heart">–ö—É—Ä—Å–æ—Ä: –°–µ—Ä–¥–µ—á–∫–æ ‚ù§Ô∏è</option>
                    <option value="arrow">–ö—É—Ä—Å–æ—Ä: –°—Ç—Ä–µ–ª–∞ –ê–º—É—Ä–∞ üèπ</option>
                </select>
                <select id="bg-select">
                    <option value="none">‚ú® –ë–µ–∑ —Ñ–æ–Ω–∞ (–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)</option>
                    <option value="1">–§–æ–Ω 1 üå∏</option>
                    <option value="2">–§–æ–Ω 2 üéÄ</option>
                    <option value="3">–§–æ–Ω 3 üíñ</option>
                    <option value="4">–§–æ–Ω 4 ‚ú®</option>
                    <option value="5">–§–æ–Ω 5 üç≠</option>
                    <option value="6">–§–æ–Ω 6 ü¶Ñ</option>
                </select>
            </div>
        </div>

        <div class="section">
            <span class="section-title">2. –ö–æ–º–∞–Ω–¥—ã –∏ –°–∏–º–≤–æ–ª—ã</span>
            <div class="flex-row">
                <input type="text" id="t1" placeholder="–ö–æ–º–∞–Ω–¥–∞ 1 (–Ω–∞–ø—Ä. –î–µ–≤–æ—á–∫–∏)">
                <select id="s1" style="flex: 0.4;">
                    <option value="‚ù§Ô∏è">‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ</option>
                    <option value="‚úâÔ∏è">‚úâÔ∏è –ü–∏—Å—å–º–æ</option>
                    <option value="üëº">üëº –ê–º—É—Ä</option>
                    <option value="üèπ">üèπ –°—Ç—Ä–µ–ª–∞</option>
                    <option value="‚ùå">‚ùå –ö—Ä–µ—Å—Ç–∏–∫</option>
                </select>
            </div>
            <div class="flex-row">
                <input type="text" id="t2" placeholder="–ö–æ–º–∞–Ω–¥–∞ 2 (–Ω–∞–ø—Ä. –ú–∞–ª—å—á–∏–∫–∏)">
                <select id="s2" style="flex: 0.4;">
                    <option value="‚úâÔ∏è">‚úâÔ∏è –ü–∏—Å—å–º–æ</option>
                    <option value="‚ù§Ô∏è">‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ</option>
                    <option value="‚ùå">‚ùå –ö—Ä–µ—Å—Ç–∏–∫</option>
                    <option value="‚≠ï">‚≠ï –ù–æ–ª–∏–∫</option>
                </select>
            </div>
        </div>

        <div class="section">
            <span class="section-title">3. –í–æ–ø—Ä–æ—Å—ã –∏ –û—Ç–≤–µ—Ç—ã</span>
            <div id="questions-grid"></div>
        </div>
        
        <button onclick="generate()">–û–ë–ù–û–í–ò–¢–¨ –ò–ì–†–£ ‚ú®</button>
        
        <div id="result-box" style="display:none; margin-top:20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="font-size: 12px; color: #888; font-weight: bold;">–ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ Genially:</span>
                <button id="copy-btn" onclick="copyCode()" class="copy-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å üìã</button>
            </div>
            <textarea id="code-box" readonly></textarea>
        </div>
    </div>

    <div class="preview-side">
        <div id="preview-container">
            <iframe id="preview-frame" src="about:blank"></iframe>
        </div>
        <p style="color: var(--primary); font-weight: bold; margin-top: 15px;">
            ‚ú® –¢–∞–∫ –∏–≥—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
        </p>
    </div>
</div>

<script>
    const gridContainer = document.getElementById('questions-grid');
    const imagesData = {};

    for (let i = 1; i <= 9; i++) {
        gridContainer.innerHTML += `
            <div class="q-row">
                <input type="text" id="q${i}" placeholder="–í–æ–ø—Ä–æ—Å ${i}">
                <input type="text" id="a${i}" placeholder="–û—Ç–≤–µ—Ç">
                <div class="upload-zone" onclick="document.getElementById('file${i}').click()" 
                     id="zone${i}" ondrop="dropHandler(event, ${i})" ondragover="return false">
                    <img id="prev${i}" class="preview-img-mini">
                    <span id="text${i}">üñºÔ∏è –§–æ—Ç–æ</span>
                    <input type="file" id="file${i}" hidden onchange="fileHandler(this, ${i})" accept="image/*">
                </div>
            </div>`;
    }

    function processFile(file, index) {
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            imagesData[index] = e.target.result;
            const prev = document.getElementById('prev'+index);
            prev.src = e.target.result; prev.style.display = 'block';
            document.getElementById('text'+index).style.display = 'none';
            document.getElementById('zone'+index).style.borderColor = "#4CAF50";
        };
        reader.readAsDataURL(file);
    }

    function fileHandler(input, index) { processFile(input.files[0], index); }
    function dropHandler(ev, index) {
        ev.preventDefault();
        if (ev.dataTransfer.files) processFile(ev.dataTransfer.files[0], index);
    }

    function generate() {
        const baseUrl = "index.html"; 
        let params = new URLSearchParams();
        
        params.set('grid', document.getElementById('grid-select').value);
        params.set('cur', document.getElementById('cur-select').value);
        params.set('bg', document.getElementById('bg-select').value);
        
        const colorValue = document.getElementById('grid-color').value.substring(1);
        params.set('gc', colorValue);

        params.set('t1', document.getElementById('t1').value || "–ö–æ–º–∞–Ω–¥–∞ 1");
        params.set('s1', document.getElementById('s1').value); 
        params.set('t2', document.getElementById('t2').value || "–ö–æ–º–∞–Ω–¥–∞ 2");
        params.set('s2', document.getElementById('s2').value);

        for (let i = 1; i <= 9; i++) {
            const q = document.getElementById('q'+i).value || "";
            const a = document.getElementById('a'+i).value || "";
            const img = imagesData[i] || "";
            params.set('q'+i, `${q}|${a}|${img}`);
        }

        const finalUrl = baseUrl + "?" + params.toString();
        document.getElementById('preview-frame').src = finalUrl;
        
        const fullUrl = window.location.href.replace('editor.html', '') + finalUrl;
        document.getElementById('code-box').value = `<iframe src="${fullUrl}" width="800" height="600" frameborder="0" allowtransparency="true" allowfullscreen></iframe>`;
        document.getElementById('result-box').style.display = 'block';
    }

    // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø
    function copyCode() {
        const codeBox = document.getElementById('code-box');
        const btn = document.getElementById('copy-btn');
        
        codeBox.select();
        codeBox.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(codeBox.value);

        const originalText = btn.innerText;
        btn.innerText = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! ‚úÖ";
        btn.style.background = "#4CAF50";

        setTimeout(() => {
            btn.innerText = originalText;
            btn.style.background = "#ff4d6d";
        }, 2000);
    }
</script>
</body>
</html>

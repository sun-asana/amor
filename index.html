<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amor Engine Pro</title>
    <style>
        :root {
            --primary: #ff4d6d;
            --neon-shadow: 0 0 10px #ff4d6d, 0 0 20px #ff4d6d;
        }

        body {
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            font-family: 'Segoe UI', sans-serif; overflow: hidden; cursor: none;
            transition: background 0.5s;
        }

        /* –°–¢–ò–õ–ò –°–ï–¢–û–ö */
        .board { display: grid; grid-template-columns: repeat(3, 110px); gap: 15px; z-index: 10; }
        
        /* –°–µ—Ç–∫–∞: –ü—É–Ω–∫—Ç–∏—Ä */
        .grid-dots .cell { border: 3px dashed var(--primary); background: rgba(255,255,255,0.5); }
        
        /* –°–µ—Ç–∫–∞: –°–µ—Ä–¥–µ—á–∫–∏ */
        .grid-hearts .cell { border: 10px solid transparent; border-image: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') 30 round; }
        
        /* –°–µ—Ç–∫–∞: –ù–µ–æ–Ω */
        .grid-neon .cell { border: 2px solid #fff; box-shadow: var(--neon-shadow); background: rgba(0,0,0,0.2); color: #fff; }

        .cell {
            width: 110px; height: 110px; border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 50px; transition: all 0.3s ease; background: white;
        }

        /* –ú–ê–ì–ò–ß–ï–°–ö–ò–ô –ö–£–†–°–û–† –ò –ü–´–õ–¨–¶–ê */
        #custom-cursor {
            position: fixed; width: 60px; pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%); filter: drop-shadow(0 0 5px gold);
        }

        .particle {
            position: fixed; pointer-events: none; z-index: 9998;
            font-size: 10px; animation: magic 1.5s forwards;
            text-shadow: 0 0 5px white, 0 0 10px var(--primary);
        }

        @keyframes magic {
            0% { transform: translate(0,0) scale(1) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)) scale(0) rotate(360deg); opacity: 0; }
        }

        /* –û–ö–ù–û –í–û–ü–†–û–°–ê */
        #modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 30px; z-index: 100;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); text-align: center; width: 300px;
        }

        .btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body id="main-body">

    <div id="status" style="font-size: 24px; color: var(--primary); margin-bottom: 20px; font-weight: bold; z-index: 10;"></div>
    <div id="board" class="board"></div>

    <div id="modal">
        <h3 id="modal-team"></h3>
        <p id="q-text"></p>
        <input type="text" id="ans-input" style="width: 80%; padding: 8px; margin-bottom: 10px; border: 2px solid #ffb3c1; border-radius: 10px;">
        <button class="btn" onclick="check()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
    </div>

    <img id="custom-cursor" src="https://cdn-icons-png.flaticon.com/512/3588/3588640.png">

    <script>
        const p = new URLSearchParams(window.location.search);
        
        // 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ–Ω–∞
        const bgs = {
            'romance': 'linear-gradient(135deg, #fff0f5, #ffdee9)',
            'science': 'url("https://www.toptal.com/designers/subtlepatterns/uploads/micro-carbon.png") #f8f9fa',
            'modern': '#ff4d6d'
        };
        document.getElementById('main-body').style.background = bgs[p.get('bg')] || bgs['romance'];

        // 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∫–∏
        const board = document.getElementById('board');
        board.classList.add('grid-' + (p.get('grid') || 'dots'));

        // 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ —Å–∏–º–≤–æ–ª–æ–≤
        const t1 = { name: p.get('t1') || "–ö–æ–º–∞–Ω–¥–∞ 1", sym: p.get('s1') || "‚ù§Ô∏è" };
        const t2 = { name: p.get('t2') || "–ö–æ–º–∞–Ω–¥–∞ 2", sym: p.get('s2') || "‚úâÔ∏è" };
        let cur = 1;

        // 4. –ß–∞—Å—Ç–∏—Ü—ã (–ü—ã–ª—å—Ü–∞)
        document.addEventListener('mousemove', (e) => {
            const c = document.getElementById('custom-cursor');
            c.style.left = e.clientX + 'px'; c.style.top = e.clientY + 'px';
            
            if(Math.random() > 0.7) {
                const part = document.createElement('div');
                part.className = 'particle';
                // –í–ø–µ—Ä–µ–º–µ—à–∫—É —Å–µ—Ä–¥–µ—á–∫–∏ –∏ –∏—Å–∫—Ä—ã
                const types = ['‚ù§Ô∏è', '‚ú®', 'üå∏', '‚ñ´Ô∏è'];
                part.innerText = types[Math.floor(Math.random()*types.length)];
                part.style.left = e.clientX + 'px';
                part.style.top = e.clientY + 'px';
                // –°–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–µ—Ç–∞
                part.style.setProperty('--dx', (Math.random()*100 - 50) + 'px');
                part.style.setProperty('--dy', (Math.random()*100 - 50) + 'px');
                document.body.appendChild(part);
                setTimeout(() => part.remove(), 1500);
            }
        });

        // 5. –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã (—É–ø—Ä–æ—â–µ–Ω–Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)
        const status = document.getElementById('status');
        status.innerText = "–•–æ–¥: " + t1.name;

        for(let i=0; i<9; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.onclick = () => {
                if(cell.innerText !== "") return;
                document.getElementById('modal').style.display = 'block';
                document.getElementById('q-text').innerText = p.get('q'+(i+1)) || "–í–æ–ø—Ä–æ—Å –¥–ª—è —è—á–µ–π–∫–∏ " + (i+1);
                window.activeCell = cell;
            };
            board.appendChild(cell);
        }

        function check() {
            window.activeCell.innerText = cur === 1 ? t1.sym : t2.sym;
            cur = cur === 1 ? 2 : 1;
            status.innerText = "–•–æ–¥: " + (cur === 1 ? t1.name : t2.name);
            document.getElementById('modal').style.display = 'none';
        }
    </script>
</body>
</html>
